---
// src/pages/store/index.astro
import BaseLayout from "@/layouts/BaseLayout.astro";

const pageTitle = "Store — Abba Unveiled";
const pageDesc = "Get The Yahweh Deception and other resources from W.R. Selvig.";
---

<BaseLayout title={pageTitle} description={pageDesc}>
  <section class="store-hero">
    <div class="store-hero__overlay"></div>

    <div class="store-hero__container">
      <div class="product-card">
        <div class="product-card__media">
          <img
            src="/images/ydmockup.png"
            alt="Book cover: The Yahweh Deception by W.R. Selvig"
            class="product-card__img"
            loading="eager"
            decoding="async"
          />

          <!-- NEW: small logo under the cover -->
          <img
            src="/images/scroll500.png"
            alt="Abba Unveiled scroll logo"
            class="product-card__logo"
            loading="lazy"
            decoding="async"
          />

          <!-- NEW: small script-style price under the cover -->
          <div class="price-script" aria-label="Price">$24.95</div>
        </div>

        <div class="product-card__body">
          <h1 class="product-card__title">The Yahweh Deception</h1>
          <p class="product-card__subtitle">Unveiling the Father Jesus revealed.</p>

          <p class="product-card__desc">
            A clear, courageous invitation to meet Abba as Jesus revealed Him—free from fear, legalism,
            and confusion. The book is broken into three parts: Part I — theology grounded in Divine Council
            and Second Temple context; Part II — learning how to encounter the Father; Part III — encounters
            I had with Heaven while writing this book.
          </p>

          <ul class="product-card__bullets">
            <li>Nearly 370 pages</li>
            <li>Scripture-based deep dive to remove the veil over the Old Testament</li>
            <li>Practical exercises for intimacy with the Father</li>
            <li>Seeing familiar scriptures from a new angle — that Jesus confronted Yahweh’s system, not supported it</li>
          </ul>

          <div class="product-card__cta">
  <a
    href="https://www.lulu.com/shop/w-r-selvig/the-yahweh-deception/paperback/product-kvd25kw.html?page=1&pageSize=4"
    class="btn-cta btn-cta--elevated btn-cta--stacked btn-cta--block"
    target="_blank"
    rel="noopener noreferrer"
    aria-label="Order The Yahweh Deception on Lulu"
  >
    <span class="btn-cta__eyebrow">Order Paperback on Lulu</span>
    <span class="btn-cta__main">Click to Buy Now <span class="btn-cta__arrow" aria-hidden="true">→</span></span>
  </a>

  <!-- Optional alternative style (kept here so you can switch):
  <a
    href="https://www.lulu.com/shop/w-r-selvig/the-yahweh-deception/paperback/product-kvd25kw.html?page=1&pageSize=4"
    class="btn-cta btn-cta--outline btn-cta--stacked btn-cta--block"
    target="_blank" rel="noopener noreferrer"
  >
    <span class="btn-cta__eyebrow">Order Paperback</span>
    <span class="btn-cta__main">Click Here to Order</span>
  </a>
  -->

  <a class="btn-ghost" href="/about">Learn more about the message</a>
</div>


        </div>
      </div>
    </div>
  </section>
 <!-- Sticky Buy Bar (mobile only) -->
<div id="sticky-buy" class="stickybuy" hidden>
  <div class="stickybuy__inner">
    <div class="stickybuy__meta">
      <img src="/images/ydmockup.png" alt="" class="stickybuy__thumb" />
      <div>
        <div class="stickybuy__title">The Yahweh Deception</div>
        <div class="stickybuy__price">$24.95</div>
      </div>
    </div>

    <a
      href="https://www.lulu.com/shop/w-r-selvig/the-yahweh-deception/paperback/product-kvd25kw.html?page=1&pageSize=4"
      class="btn-cta btn-cta--elevated"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Buy The Yahweh Deception on Lulu"
    >
      Buy Now
    </a>
  </div>
</div>

<script is:inline>
  // Show the sticky bar once the main product card is mostly off-screen
  (function () {
    const bar = document.getElementById('sticky-buy');
    const target = document.querySelector('.product-card') || document.querySelector('.store-hero');

    if (!bar || !target || !('IntersectionObserver' in window)) {
      // Fallback: if no IO, just show on mobile after slight delay
      if (window.matchMedia('(max-width: 640px)').matches) {
        setTimeout(() => bar && (bar.hidden = false), 800);
      }
      return;
    }

    const io = new IntersectionObserver(
      (entries) => {
        const e = entries[0];
        // When the product card is not intersecting (scrolled past), show the bar
        bar.hidden = e.isIntersecting;
      },
      { rootMargin: '-10% 0px 0px 0px', threshold: 0.15 }
    );
    io.observe(target);
  })();
</script>

</BaseLayout>

<style>
  /* Hero background */
  .store-hero {
    position: relative;
    min-height: 85vh;
    padding: 48px 16px 72px;
    background: url("/images/library.png") center/cover no-repeat;
  }
  .store-hero__overlay {
    position: absolute; inset: 0;
    background: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55));
    z-index: 0;
  }
  .store-hero__container {
    position: relative; z-index: 1;
    max-width: 1100px; margin: 0 auto;
    display: grid; place-items: center;
  }

  /* Product card */
  .product-card {
    width: 100%; max-width: 1000px;
    display: grid; grid-template-columns: 1fr 1.2fr; gap: 28px;
    background: #fff; color: #111;
    border-radius: 24px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.25);
    border: 1px solid rgba(17,17,17,0.08);
    overflow: hidden;
  }
  .product-card__media {
    background: #fafafa;
    padding: 24px; display: grid; place-items: center;
    text-align: center;
  }
  .product-card__img {
    width: 100%; max-width: 420px; height: auto;
    border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  }
  /* NEW: small logo display size (source image is 500px wide) */
  .product-card__logo {
    width: 120px;   /* reduce on-page size */
    height: auto;
    margin-top: 12px;
    opacity: 0.95;
  }
  /* NEW: small 'script-like' price under cover */
  .price-script {
    margin-top: 6px;
    font-size: 0.95rem;
    font-style: italic;
    color: #374151;
  }

  .product-card__body {
    padding: 28px 28px 32px;
  }
  .product-card__title {
    margin: 0; font-size: 2rem; line-height: 1.15; letter-spacing: -0.01em;
  }
  .product-card__subtitle {
    margin: 6px 0 14px; color: #4b5563; font-size: 1.05rem;
  }
  .product-card__desc { margin: 0 0 12px; line-height: 1.7; }
  .product-card__bullets { margin: 10px 0 18px; padding-left: 1.2rem; }
  .product-card__bullets li { margin: 6px 0; }

  .product-card__cta { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }

  /* Buttons */
  /* Buttons */
.btn-cta{
  --cta-bg: #111;           /* base fill for elevated style */
  --cta-fg: #fff;           /* text color for elevated style */
  --cta-border: #111;       /* border color */
  --cta-shadow: 0 10px 22px rgba(0,0,0,.18);
  --cta-radius: 16px;       /* less-round than full pill */
  --cta-minw: 260px;        /* forces a longer shape */
  --ring: 0 0 0 3px rgba(17,17,17,.14);

  display:inline-flex; align-items:center; justify-content:center;
  gap:.45rem; text-align:center; text-decoration:none;
  padding: .9rem 1.25rem; border-radius: var(--cta-radius);
  border: 1.5px solid var(--cta-border);
  font-weight: 700; letter-spacing:.01em;
  min-width: var(--cta-minw);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease, color .12s ease, border-color .12s ease, opacity .12s ease;
  position: relative; isolation:isolate; cursor:pointer;
}
.btn-cta:focus-visible { outline: none; box-shadow: var(--ring), var(--cta-shadow); }

/* Elevated (filled) */
.btn-cta--elevated{
  background: var(--cta-bg);
  color: var(--cta-fg);
  box-shadow: var(--cta-shadow);
}
.btn-cta--elevated:hover{
  transform: translateY(-1px);
  box-shadow: 0 12px 26px rgba(0,0,0,.22);
}

/* Outline (classy line with subtle bg on hover) */
.btn-cta--outline{
  background: #fff;
  color: #111;
  --cta-border: rgba(17,17,17,.65);
}
.btn-cta--outline:hover{
  background: #111;
  color: #fff;
  transform: translateY(-1px);
}

/* Two-line variant already used */
.btn-cta--stacked{
  flex-direction:column; line-height:1.08; padding-top:1rem; padding-bottom:1rem;
}
.btn-cta__eyebrow{
  font-weight:600; font-size:.84rem; opacity:.92; letter-spacing:.02em;
}
.btn-cta__main{
  font-size:1.08rem; font-weight:800; display:inline-flex; align-items:center; gap:.35rem;
}
.btn-cta__arrow{ display:inline-block; transform: translateX(0); transition: transform .12s ease; }
.btn-cta:hover .btn-cta__arrow{ transform: translateX(2px); }

/* Halo effect for a premium feel */
.btn-cta--elevated::after,
.btn-cta--outline::after{
  content:""; position:absolute; inset:-6px; border-radius: calc(var(--cta-radius) + 6px);
  pointer-events:none; box-shadow: 0 0 0 0 rgba(17,17,17,.0);
  transition: box-shadow .18s ease;
}
.btn-cta:hover::after{ box-shadow: 0 0 0 6px rgba(17,17,17,.06); }

/* Block on small screens so it doesn’t feel tiny/round */
.btn-cta--block{ width: auto; }
@media (max-width: 640px){
  .btn-cta--block{ width: 100%; }
}

/* Keep your ghost secondary the same (optional small refinement) */
.btn-ghost{
  display:inline-block; padding:.7rem 1rem; border-radius:12px;
  font-weight:600; border:1.5px dashed rgba(17,17,17,.55);
  color:#111; text-decoration:none; background:transparent;
  transition: color .12s ease, border-color .12s ease, transform .12s ease;
}
.btn-ghost:hover{ color:#000; border-color:#111; transform: translateY(-1px); }


  /* Responsive */
  @media (max-width: 920px) {
    .product-card { grid-template-columns: 1fr; }
    .product-card__media { padding: 18px; }
    .product-card__body { padding: 20px; }
    .product-card__title { font-size: 1.7rem; }
  }
  @media (max-width:420px){
    .btn-cta__eyebrow{ font-size:.8rem; }
    .btn-cta__main{ font-size:1rem; }
    .product-card__logo { width: 100px; }
    .price-script { font-size: 0.9rem; }
  }
  /* Sticky Buy Bar (mobile-first; hidden on larger screens) */
.stickybuy {
  position: sticky; bottom: 0; left: 0; right: 0; z-index: 60;
  padding: env(safe-area-inset-bottom, 0);
  background: rgba(255,255,255,0.92);
  backdrop-filter: saturate(120%) blur(8px);
  border-top: 1px solid rgba(17,17,17,0.08);
  box-shadow: 0 -8px 24px rgba(0,0,0,0.12);
}
.stickybuy[hidden] { display: none !important; }

.stickybuy__inner {
  max-width: 1100px; margin: 0 auto; padding: 10px 12px;
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
}

.stickybuy__meta {
  display: flex; align-items: center; gap: 10px; min-width: 0;
}
.stickybuy__thumb {
  width: 40px; height: 56px; object-fit: cover; border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,.18);
}
.stickybuy__title {
  font-weight: 700; font-size: .95rem; line-height: 1.1; color:#111; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.stickybuy__price {
  font-weight: 600; font-size: .9rem; color:#374151; margin-top: 2px;
}

/* Button inside bar reuses your .btn-cta classes */
.stickybuy .btn-cta {
  --cta-radius: 12px;       /* slightly tighter radius for compact bar */
  --cta-minw: 140px;        /* keep compact but readable */
  padding: .7rem 1rem;
}

/* Hide the bar on larger screens (adjust breakpoint if desired) */
@media (min-width: 768px){
  .stickybuy { display: none !important; }
}

</style>
