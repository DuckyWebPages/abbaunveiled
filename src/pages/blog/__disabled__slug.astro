---
import BaseLayout from "../../layouts/BaseLayout.astro";

// Import all MDX files (lazy, so we can load the one we need by path)
const modules = import.meta.glob('../../content/*.mdx');

export async function getStaticPaths() {
  return Object.keys(modules).map((path) => {
    const slug = path.split('/').pop()?.replace(/\.mdx?$/, '');
    return { params: { slug }, props: { path } };
  });
}

const entry = Astro.props.path;
const mod = await modules[entry]();
const { Content, frontmatter } = mod;
---

<BaseLayout title={frontmatter?.title ?? "Post"} description={frontmatter?.summary}>
  <article class="prose max-w-none">
    <Content />
  </article>
</BaseLayout>

